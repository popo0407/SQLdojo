# アプリ説明機能改善の実装方針

## 決定した実装方針

### 案 2: 分割レイアウト方式（メインコンテンツと説明スペースを並列配置）を採用

## 採用理由

1. **ユーザビリティの向上**: メインコンテンツを圧縮するだけで、完全に隠れることがないため、ユーザーは常にアプリの状態を把握できる

2. **開発憲章との整合性**:

   - 単一責任の原則: 説明機能を独立したコンポーネントとして分離
   - 関心の分離: UI 表示とビジネスロジックを明確に分離
   - 状態管理の一元化: StateService で説明画面の状態を管理

3. **技術的実現性**:

   - CSS Grid/Flexbox を使用した動的レイアウト調整が容易
   - 既存の TutorialService を拡張して実装可能
   - レスポンシブ対応が比較的簡単

4. **保守性**:
   - 既存のオーバーレイ機能を段階的に移行可能
   - 説明データの構造を維持しつつ、表示方式のみ変更

## 実装計画

### Phase 1: レイアウト基盤の構築

- CSS Grid を使用した動的レイアウトシステム
- 説明スペースの表示/非表示切り替え機能
- メインコンテンツの幅調整機能

### Phase 2: 視覚的フィードバックの改善

- 説明文の赤字表示
- 説明箇所の黄色枠点滅効果
- キーボードナビゲーション対応

### Phase 3: 個別説明機能の追加

- 各要素への？マーク配置
- 個別説明の表示ロジック
- 説明データの拡張

### Phase 4: ユーザビリティの最適化

- 進捗保存機能
- スキップ機能
- アクセシビリティ対応

## リスク対策

1. **既存機能の保護**: 現在のオーバーレイ機能を残しつつ、新しいレイアウトを並行実装
2. **段階的移行**: 各フェーズで動作確認を行い、問題があれば即座にロールバック
3. **テスト駆動**: 各機能の動作をテストで保証

## 開発憲章準拠

- 本番機能の絶対保護を最優先
- テストによる振る舞いの保証を徹底
- 影響範囲の徹底的な特定と管理
- 変更は小さく、段階的に進める
